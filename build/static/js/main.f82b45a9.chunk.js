(this.webpackJsonpvidly=this.webpackJsonpvidly||[]).push([[0],{53:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(30),s=n.n(c),o=(n(53),n(2)),i=n(5),u=n(4),l=n(3),d=n(7),h=n(18),b=n(6),j=n.n(b),p=n(12),m=n(47),v=n(19),O=n.n(v);var f={init:function(){},log:function(e){console.error(e)}};O.a.defaults.baseURL="https://shrouded-everglades-10668.herokuapp.com/api",O.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(f.log(e),h.toast.error("An unexpected error accurred")),Promise.reject(e)}));var g={get:O.a.get,post:O.a.post,delete:O.a.delete,put:O.a.put,setJwt:function(e){O.a.defaults.headers.common["x-auth-token"]=e}},x="/auth",y="token";function k(){return(k=Object(p.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post(x,t);case 2:n=e.sent,r=n.data,localStorage.setItem(y,r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return localStorage.getItem(y)}g.setJwt(S());var C={login:function(e){return k.apply(this,arguments)},loginWithJwt:function(e){localStorage.setItem(y,e)},getJwt:S,logout:function(){localStorage.removeItem(y)},getCurrentUser:function(){try{var e=localStorage.getItem(y);return Object(m.a)(e)}catch(t){return null}}},w=n(10),N=n(0),I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.user;return Object(N.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{className:"navbar-brand m-2 ",children:" Vidly "}),Object(N.jsx)(w.c,{className:"m-2 ",to:"/movies",children:"Movies"}),Object(N.jsx)(w.c,{className:"m-2 ",to:"/customers",children:"Customers"}),Object(N.jsx)(w.c,{className:"m-2 ",to:"/rentals",children:"Rentals"}),Object(N.jsx)(w.c,{className:"m-2 ",to:"/counters",children:"Counters"}),!e&&Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)(w.c,{className:"m-2 ",to:"/login-form",children:"Login"}),Object(N.jsx)(w.c,{className:"m-2 ",to:"/register",children:"Register"})]}),e&&Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)(w.c,{className:"m-2 ",to:"/profile",children:e.name}),Object(N.jsx)(w.c,{className:"m-2 ",to:"/logout",children:"Logout"})]})]})})}}]),n}(r.Component),P=n(25),R=n(8),_="/movies";function D(e){return"".concat(_,"/").concat(e)}function A(e){return g.get(D(e))}function T(e){var t=Object(R.a)({},e);return e._id?(delete t._id,g.put(D(e._id),t)):(delete t.like,console.log(e),g.post(_,t))}function L(e){return g.delete(D(e))}function E(){return g.get("/genres")}var M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).renderPageItems=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[],a=function(e){var a="page-item ";n===e&&(a+="active"),r.push(Object(N.jsx)("li",{className:a,children:Object(N.jsx)("a",{className:"page-link",href:"#",onClick:function(){return t(e)},children:e})},e))},c=1;c<=e;c++)a(c);return r},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.itemsCount,n=e.pageSize,r=e.onPageChange,a=e.selectedPage,c=Math.ceil(t/n);return 1===c?null:Object(N.jsx)("nav",{children:Object(N.jsx)("ul",{className:"pagination",children:this.renderPageItems(c,r,a)})})}}]),n}(r.Component),G=n(21),F=n.n(G);function U(e,t,n){var r=(t-1)*n;return F()(e).slice(r).take(n).value()}function q(e,t){return t?e.filter((function(e){return e.genre._id===t})):e}var J=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.textProperty,r=e.valueProperty,a=e.selectedItem,c=e.onItemSelect;return Object(N.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(N.jsxs)("li",{className:"list-group-item ".concat(a===e[r]?" active":""),onClick:function(){return c(e[r])},children:[e[n]," "]},e[r])}))})}}]),n}(r.Component);J.defaultProps={textProperty:"name",valueProperty:"_id"};var z=J,W=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.liked,n=e.item,r=e.onClick,a="fa fa-heart";return t||(a+="-o"),Object(N.jsx)("i",{style:{cursor:"pointer"},className:a,"aria-hidden":"true",onClick:function(){return r(n)}})}}]),n}(r.Component),B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).renderCell=function(e,t){return t.content?t.content(e):F.a.get(e,t.path)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.columns;return Object(N.jsx)("tbody",{children:n.map((function(t){return Object(N.jsx)("tr",{children:r.map((function(n){return Object(N.jsx)("td",{children:e.renderCell(t,n)},n.path||n.key)}))},Math.random()+"")}))})}}]),n}(r.Component),H=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).raiseSort=function(t){var n=Object(R.a)({},e.props.sortedColumn);t.path&&(n.path=t.path,n.order="asc"===n.order?"desc":"asc",e.props.onSort(n))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.sortedColumn,r=t.columns,a=function(e){if(e===n.path&&e){var t="fa fa-caret-";return"asc"===n.order?t+="down":t+="up",Object(N.jsx)("i",{className:t,"aria-hidden":"true"})}};return Object(N.jsx)("thead",{children:Object(N.jsx)("tr",{children:r.map((function(t){return Object(N.jsxs)("th",{onClick:function(){return e.raiseSort(t)},children:[" ",t.label," ",a(t.path)," "]},t.path||t.key)}))})})}}]),n}(r.Component),V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.columns,r=e.sortedColumn,a=e.onSort;return Object(N.jsxs)("table",{className:"table",children:[Object(N.jsx)(H,{sortedColumn:r,onSort:a,columns:n}),Object(N.jsx)(B,{data:t,columns:n})]})}}]),n}(r.Component),K=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n),(e=t.call(this)).columns=[{path:"title",label:"Title",content:function(e){return Object(N.jsx)(w.b,{to:"/movies/".concat(e._id),children:e.title})}},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"},{key:"Like",content:function(t){return Object(N.jsx)(W,{liked:t.liked,item:t,onClick:e.props.onLike})}}],e.deleteColumn={key:"Delete",content:function(t){return Object(N.jsx)("button",{onClick:function(){return e.props.onDelete(t._id)},className:"btn btn-danger btn-sm",children:"Delete"})}};var r=C.getCurrentUser();return r&&r.isAdmin&&e.columns.push(e.deleteColumn),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.movies,n=e.sortedColumn,r=e.onSort;return Object(N.jsx)(V,{data:t,columns:this.columns,sortedColumn:n,onSort:r})}}]),n}(r.Component),X=n(22),Z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.label,r=e.error,a=Object(X.a)(e,["name","label","error"]);return Object(N.jsxs)("div",{className:"form-group",children:[n&&Object(N.jsx)("label",{htmlFor:t,children:n}),Object(N.jsx)("input",Object(R.a)(Object(R.a)({},a),{},{name:t,id:t,className:"form-control"})),r&&Object(N.jsx)("div",{className:"alert alert-danger",children:r})]})}}]),n}(r.Component),Q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange;return Object(N.jsx)(Z,{type:"search",name:"query",value:t,onChange:n,placeholder:"Search..."})}}]),n}(r.Component),Y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={movies:[],genres:[],currentPage:1,pageSize:4,selectedGenre:0,sortOptions:{path:"dailyRentalRate",order:"asc"},search:""},e.handleDelete=function(){var t=Object(p.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.movies,a=r.filter((function(e){return e._id!==n})),e.setState({movies:a}),t.prev=3,t.next=6,L(n);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),t.t0.response&&404===t.t0.response.status&&h.toast.error("Movie has already been deleted!"),e.setState({movies:r});case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLike=function(t){var n=Object(P.a)(e.state.movies),r=e.state.movies.indexOf(t);n[r].liked=!n[r].liked,e.setState({movies:n})},e.getPagedData=function(t){var n=e.state,r=n.currentPage,a=n.pageSize,c=n.selectedGenre,s=n.sortOptions,o=n.search,i=t;return o?i=t.filter((function(e){return e.title.toLowerCase().includes(o.toLowerCase())})):c&&(i=q(t,c)),{movies:U(F.a.orderBy(i,[s.path],[s.order]),r,a),length:i.length}},e.handlePageChange=function(t){e.setState({currentPage:t})},e.handleGenreSelect=function(t){e.setState({selectedGenre:t,currentPage:1,search:""})},e.handleSort=function(t){e.setState({sortOptions:t})},e.handleSearch=function(t){var n=t.currentTarget;e.setState({search:n.value,selectedGenre:0,currentPage:1})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(j.a.mark((function e(){var t,n,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get(_);case 2:return t=e.sent,n=t.data,e.next=6,E();case 6:r=e.sent,a=r.data,c=[{name:"All Genres",_id:0}].concat(Object(P.a)(a)),this.setState({movies:n,genres:c});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.movies,r=t.currentPage,a=t.pageSize,c=t.genres,s=t.selectedGenre,o=t.sortOptions,i=t.search,u=this.getPagedData(n),l=u.movies,d=u.length;return 0===d?Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{children:"Table is empty!"}),Object(N.jsx)("button",{className:"btn btn-primary",onClick:function(){e.setState({search:"",selectedGenre:0})},children:"Try again"})]}):Object(N.jsxs)("div",{className:"row my-4",children:[Object(N.jsx)("div",{className:"col-2",children:Object(N.jsx)(z,{items:c,selectedItem:s,onItemSelect:this.handleGenreSelect})}),Object(N.jsxs)("div",{className:"col",children:[this.props.user&&Object(N.jsx)(w.b,{to:"/movies/new",className:"btn btn-primary mb-3",children:"New Movie"}),Object(N.jsx)("p",{children:"showing ".concat(d," movies in the datebase")}),Object(N.jsx)(Q,{value:i,onChange:this.handleSearch}),Object(N.jsx)(K,{movies:l,onLike:this.handleLike,onDelete:this.handleDelete,sortedColumn:o,onSort:this.handleSort}),Object(N.jsx)("div",{className:"d-flex justify-content-center",children:Object(N.jsx)(M,{itemsCount:d,pageSize:a,onPageChange:this.handlePageChange,selectedPage:r})})]})]})}}]),n}(r.Component),$=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)("div",{className:"col-1",children:function(){var t=e.props.counter.value;return 0===t?Object(N.jsx)("span",{className:"mr-2 badge bg-warning text-dark",children:"Zero"}):Object(N.jsx)("span",{className:"mr-2 badge bg-primary text-light ",children:t})}()}),Object(N.jsxs)("div",{className:"col-2",children:[Object(N.jsx)("button",{onClick:function(){return e.props.onIncreament(e.props.counter.id)},className:"m-2 btn btn-secondary",children:"+"}),Object(N.jsx)("button",{disabled:!this.props.counter.value,onClick:function(){return e.props.onDecreament(e.props.counter.id)},className:"m-2 btn btn-secondary",children:"-"}),Object(N.jsx)("button",{onClick:function(){return e.props.onDelete(e.props.counter.id)},className:"m-2 btn btn-danger ",children:" X "})]})]})})}}]),n}(r.Component),ee=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={counters:[{id:1,value:4},{id:2,value:0},{id:3,value:0},{id:4,value:0},{id:5,value:0}]},e.handleReset=function(){var t=e.state.counters.map((function(e){return e.value=0,e}));e.setState({counters:Object(P.a)(t)})},e.handleIncreament=function(t){var n=e.state.counters.map((function(e){return e.id!==t||e.value++,e}));e.setState({counters:n})},e.handleDecreament=function(t){var n=e.state.counters.map((function(e){return e.id!==t||e.value--,e}));e.setState({counters:n})},e.handleDelete=function(t){var n=e.state.counters.filter((function(e){return e.id!==t}));e.setState({counters:n})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{onClick:this.handleReset,className:"btn btn-primary btn-sm m-2",children:"Reset"}),this.state.counters.map((function(t){return Object(N.jsx)($,{counter:t,onDelete:e.handleDelete,onIncreament:e.handleIncreament,onDecreament:e.handleDecreament},t.id)}))]})}}]),n}(r.Component),te=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)("h1",{children:" Rentals"})})}}]),n}(r.Component),ne=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)("h1",{children:"Hello Customers"})})}}]),n}(r.Component),re=n(24),ae=n(11),ce=n.n(ae),se=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.label,r=e.options,a=e.error,c=Object(X.a)(e,["name","label","options","error"]);return Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:t,children:n}),Object(N.jsxs)("select",Object(R.a)(Object(R.a)({},c),{},{name:t,id:t,className:"custom-select mr-sm-2",children:[Object(N.jsx)("option",{value:""}),r.map((function(e){return Object(N.jsx)("option",{value:e._id,children:e.name},e._id)}))]})),a&&Object(N.jsx)("div",{className:"alert alert-danger",children:a})]})}}]),n}(r.Component),oe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).validate=function(){var t=ce.a.validate(e.state.data,e.schema,{abortEarly:!1});if(!t.error)return null;var n={};return t.error.details.forEach((function(e){n[e.path[0]]=e.message})),console.log(n,e.state.data),n},e.validateProperty=function(t,n){var r=t.name,a=Object(re.a)({},r,n[r]),c=Object(re.a)({},r,e.schema[r]),s=ce.a.validate(a,c).error;return s?s.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var n=e.validate();e.setState({errors:n||{}}),n||e.doSubmit()},e.handleChange=function(t){var n=t.currentTarget,r=Object(R.a)({},e.state.data);r[n.name]=n.value,e.setState({data:r});var a=Object(R.a)({},e.state.errors),c=e.validateProperty(n,r);c?a[n.name]=c:delete a[n.name],e.setState({errors:a})},e.renderInput=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=e.state,c=a.data,s=a.errors;return Object(N.jsx)(Z,{type:r,name:t,label:n,value:c[t],error:s[t],onChange:e.handleChange})},e.renderSelect=function(t,n,r){var a=e.state,c=a.data,s=a.errors;return Object(N.jsx)(se,{name:t,value:c[t],error:s[t],label:n,options:r,onChange:e.handleChange})},e.renderSubmit=function(t){return Object(N.jsx)("button",{disabled:e.validate(),className:"btn btn-primary",children:t})},e}return n}(r.Component),ie=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={data:{title:"",genreId:"",numberInStock:"",dailyRentalRate:"",like:!1},genres:[],errors:{}},e.schema={_id:ce.a.string(),like:ce.a.boolean(),title:ce.a.string().required().label("Title"),genreId:ce.a.string().required().label("Genre"),numberInStock:ce.a.number().integer().min(0).max(100).required().label("Number In Stock"),dailyRentalRate:ce.a.number().min(0).max(10).required().label("Daily Rental Rate")},e.doSubmit=Object(p.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.data,t.next=3,T(n);case 3:e.props.history.push("/movies");case 4:case"end":return t.stop()}}),t)}))),e.mapToViewModel=function(e){return{_id:e._id,title:e.title,genreId:e.genre._id,numberInStock:e.numberInStock,dailyRentalRate:e.dailyRentalRate,like:e.like}},e}return Object(i.a)(n,[{key:"populateGenres",value:function(){var e=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,n=t.data,this.setState({genres:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateMovies",value:function(){var e=Object(p.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"===(t=this.props.match.params.id)){e.next=13;break}return e.prev=2,e.next=5,A(t);case 5:n=e.sent,r=n.data,this.setState({data:this.mapToViewModel(r)}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.response&&404===e.t0.response.status&&this.props.history.replace("/not-found");case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(p.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateGenres();case 2:return e.next=4,this.populateMovies();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(),Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Movie Form"}),Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("title","Title"),this.renderSelect("genreId","Genre",this.state.genres),this.renderInput("numberInStock","Number In Stock","number"),this.renderInput("dailyRentalRate","Rate","number"),this.renderSubmit("Save")]})]})}}]),n}(oe),ue=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)("h1",{children:"Page NotFound"})})}}]),n}(r.Component),le=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={data:{email:"",password:""},errors:{}},e.schema={email:ce.a.string().required().email().label("Email"),password:ce.a.string().required().min(5).label("Password")},e.doSubmit=Object(p.a)(j.a.mark((function t(){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.login(e.state.data);case 3:n=e.props.location.state,window.location=n?n.from.pathname:"/",t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&((r=Object(R.a)({},e.state.errors)).email=t.t0.response.data,e.setState({errors:r}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(i.a)(n,[{key:"render",value:function(){return C.getCurrentUser()?Object(N.jsx)(d.a,{to:"/"}):Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Login"}),Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("email","Email"),this.renderInput("password","Password","password"),this.renderSubmit("Login")]})]})}}]),n}(oe),de="/users";function he(){return(he=Object(p.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post(de,t);case 2:return n=e.sent,r=n.data,a=n.headers,C.loginWithJwt(a["x-auth-token"]),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be={register:function(e){return he.apply(this,arguments)}},je=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={data:{email:"",password:"",name:""},errors:{}},e.schema={email:ce.a.string().required().email().label("Username"),password:ce.a.string().required().min(5).label("Password"),name:ce.a.string().required().label("Name")},e.doSubmit=Object(p.a)(j.a.mark((function t(){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.register(e.state.data);case 3:n=t.sent,Object(h.toast)(n.name+" successfuly registered!!"),window.location="/",t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&((r=Object(R.a)({},e.state.errors)).email=t.t0.response.data,e.setState({errors:r}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e}return Object(i.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Register"}),Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("email","Username"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderSubmit("Register")]})]})}}]),n}(oe),pe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){C.logout(),window.location="/"}},{key:"render",value:function(){return null}}]),n}(r.Component);n(88);var me=function(e){var t=e.component,n=e.render,r=Object(X.a)(e,["component","render"]);return Object(N.jsx)(d.b,Object(R.a)(Object(R.a)({},r),{},{render:function(e){return C.getCurrentUser()?t?Object(N.jsx)(t,Object(R.a)({},e)):n(e):Object(N.jsx)(d.a,{to:{pathname:"/login-form",state:{from:e.location}}})}}))},ve=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=C.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){return Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)(h.ToastContainer,{}),Object(N.jsx)(I,{user:this.state.user}),Object(N.jsx)("main",{className:"container ",children:Object(N.jsxs)(d.d,{children:[Object(N.jsx)(me,{path:"/movies/:id",component:ie}),Object(N.jsx)(d.b,{path:"/movies",children:Object(N.jsx)(Y,{user:this.state.user})}),Object(N.jsx)(d.b,{path:"/counters",component:ee}),Object(N.jsx)(d.b,{path:"/login-form",component:le}),Object(N.jsx)(d.b,{path:"/logout",component:pe}),Object(N.jsx)(d.b,{path:"/register",component:je}),Object(N.jsx)(d.b,{path:"/customers",component:ne}),Object(N.jsx)(d.b,{path:"/rentals",component:te}),Object(N.jsx)(d.b,{path:"/not-found",component:ue}),Object(N.jsx)(d.a,{from:"/",to:"/movies"}),Object(N.jsx)(d.a,{to:"/not-found"})]})})]})}}]),n}(r.Component),Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(89),n(90);f.init(),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://shrouded-everglades-10668.herokuapp.com/api"}).REACT_APP_NAME),s.a.render(Object(N.jsx)(w.a,{children:Object(N.jsx)(ve,{})}),document.getElementById("root")),Oe()}},[[91,1,2]]]);
//# sourceMappingURL=main.f82b45a9.chunk.js.map